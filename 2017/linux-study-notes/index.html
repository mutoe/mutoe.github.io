<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.2.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon.ico"><link rel="icon" type="image/png" sizes="16x16" href="/favicon.ico"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"blog.mutoe.com",root:"/",scheme:"Muse",version:"7.8.0",exturl:!1,sidebar:{position:"right",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!1,show_result:!1,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!1},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},motion:{enable:!0,async:!0,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},path:"search.xml"}</script><meta name="description" content="前言这里是一篇个人学习使用 Linux 操作系统时遇到的一些常见问题以及资料的集合. 用来在日后的操作中做一个 QA 索引. 如果它也能帮到你就再好不过了."><meta property="og:type" content="article"><meta property="og:title" content="linux 学习笔记"><meta property="og:url" content="https://blog.mutoe.com/2017/linux-study-notes/"><meta property="og:site_name" content="木头的博客"><meta property="og:description" content="前言这里是一篇个人学习使用 Linux 操作系统时遇到的一些常见问题以及资料的集合. 用来在日后的操作中做一个 QA 索引. 如果它也能帮到你就再好不过了."><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2017-08-01T04:30:09.000Z"><meta property="article:modified_time" content="2017-08-01T04:30:09.000Z"><meta property="article:author" content="mutoe"><meta property="article:tag" content="Linux"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://blog.mutoe.com/2017/linux-study-notes/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"zh-CN"}</script><title>linux 学习笔记 | 木头的博客</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="木头的博客" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span><h1 class="site-title">木头的博客</h1><span class="logo-line-after"><i></i></span></a><p class="site-subtitle" itemprop="description">我是木头 有些想法 有点精力</p></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul id="menu" class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"><div id="no-result"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content post posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://blog.mutoe.com/2017/linux-study-notes/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="mutoe"><meta itemprop="description" content="木头, 全学工程师"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="木头的博客"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">linux 学习笔记<a href="https://github.com/mutoe/mutoe.github.io/tree/master/source/_posts/linux-study-notes.md" class="post-edit-link" title="编辑" rel="noopener" target="_blank"><i class="fa fa-pencil-alt"></i></a></h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2017-08-01 12:30:09" itemprop="dateCreated datePublished" datetime="2017-08-01T12:30:09+08:00">2017-08-01</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">笔记</span></a> </span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="post-meta-item-text">阅读次数：</span> <span id="busuanzi_value_page_pv"></span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>这里是一篇个人学习使用 Linux 操作系统时遇到的一些常见问题以及资料的集合. 用来在日后的操作中做一个 QA 索引. 如果它也能帮到你就再好不过了.</p><a id="more"></a><h1 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h1><h2 id="别名"><a href="#别名" class="headerlink" title="别名"></a>别名</h2><p>在使用 yum 安装 remi 源的 php7 时，需要执行 <code>yum install php70</code>，安装完成后执行 php cli 的命令为 <code>php70 -v</code>，比较不方便，这时可以使用 alias 给 <code>php70</code> 设置一个别名。</p><p>执行以下命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">alias</span> php=`php70`</span><br></pre></td></tr></table></figure><p>注意等号前后不可以有空格，否则会报错。</p><h1 id="进程"><a href="#进程" class="headerlink" title="进程"></a>进程</h1><h2 id="挂起与恢复"><a href="#挂起与恢复" class="headerlink" title="挂起与恢复"></a>挂起与恢复</h2><table><thead><tr><th>快捷键</th><th align="left">作用</th></tr></thead><tbody><tr><td>ctrl-c</td><td align="left">发送中断信号强制中断前台进程</td></tr><tr><td>ctrl-z</td><td align="left">发送挂起信号挂起一个前台进程，挂起后使用 <code>fg</code> / <code>bg</code> 恢复进程</td></tr><tr><td>ctrl-d</td><td align="left">模拟输入 <code>.exit</code> 退出当前进程</td></tr></tbody></table><h2 id="开机启动"><a href="#开机启动" class="headerlink" title="开机启动"></a>开机启动</h2><table><thead><tr><th>命令</th><th align="left">作用</th></tr></thead><tbody><tr><td><code>chkconfig [service]</code></td><td align="left">查看某个 service 是否在开机启动状态</td></tr><tr><td><code>chkconfig [service] on</code></td><td align="left">允许开机启动某个 service</td></tr><tr><td><code>chkconfig [service] off</code></td><td align="left">禁止开机启动某个 service</td></tr></tbody></table><h1 id="安全"><a href="#安全" class="headerlink" title="安全"></a>安全</h1><h2 id="创建新用户"><a href="#创建新用户" class="headerlink" title="创建新用户"></a>创建新用户</h2><table><thead><tr><th>命令</th><th align="left">作用</th></tr></thead><tbody><tr><td><code>adduser</code></td><td align="left">自动创建新用户</td></tr><tr><td><code>useradd</code></td><td align="left">需要使用参数选项创建新用户</td></tr></tbody></table><h3 id="adduser-自动创建新用户"><a href="#adduser-自动创建新用户" class="headerlink" title="adduser 自动创建新用户"></a><code>adduser</code> 自动创建新用户</h3><p>会自动为创建的用户指定主目录、系统 shell 版本，会在创建时输入用户密码。</p><h3 id="useradd-自定义创建新用户"><a href="#useradd-自定义创建新用户" class="headerlink" title="useradd 自定义创建新用户"></a><code>useradd</code> 自定义创建新用户</h3><p>需要使用参数选项指定上述基本设置，如果不使用任何参数，则创建的用户无密码、无主目录、没有指定 shell 版本。</p><ul><li><code>-d [path]</code> 为其设置主目录.</li><li><code>-g [gid|groupname]</code> 为其指定一个主用户组. 可以接组 ID 或组名称</li><li><code>-G [gid|groupname,...]</code> 为其指定一个附加用户组. 可以用逗号分隔开(不要加空格).</li><li><code>-m</code> 如果主目录不存在则创建; 存在则不再创建, 并且这个目录不属于新用户.</li><li><code>-M</code> 不创建主目录.</li><li><code>-N</code> 不为用户创建一个同名的用户组.</li><li><code>-s [shell]</code> 指定用户登陆的 shell 版本</li><li><code>-u [uid]</code> 指定用户 uid</li></ul><p>example.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo user add -d <span class="string">&quot;/home/xxx&quot;</span> -m -s <span class="string">&quot;/bin/bash&quot;</span></span><br></pre></td></tr></table></figure><blockquote><p><code>useradd</code> 命令是有默认值的, 其值与 <code>/etc/default/useradd</code> 中的内容相同.</p></blockquote><h2 id="将用户添加进一个用户组中"><a href="#将用户添加进一个用户组中" class="headerlink" title="将用户添加进一个用户组中"></a>将用户添加进一个用户组中</h2><table><thead><tr><th>命令</th><th align="left">作用</th></tr></thead><tbody><tr><td><code>groupadd</code></td><td align="left">创建一个用户组</td></tr><tr><td><code>usermod</code></td><td align="left">更改用户信息</td></tr></tbody></table><h3 id="usermod-创建一个用户组"><a href="#usermod-创建一个用户组" class="headerlink" title="usermod 创建一个用户组"></a><code>usermod</code> 创建一个用户组</h3><p>参考 <code>useradd</code></p><ul><li><code>-a</code> 配合 <code>-G</code> 使用, 附加用户组.</li><li><code>-l [username]</code> 修改用户名.</li><li><code>-L</code> 锁定用户密码, 使密码无效.</li><li><code>-U</code> 解除密码锁定.</li></ul><h2 id="为普通用户添加-root-权限"><a href="#为普通用户添加-root-权限" class="headerlink" title="为普通用户添加 root 权限"></a>为普通用户添加 root 权限</h2><h3 id="1-切换到-root-用户下"><a href="#1-切换到-root-用户下" class="headerlink" title="1. 切换到 root 用户下"></a>1. 切换到 root 用户下</h3><h3 id="2-添加-sudo-文件的写权限"><a href="#2-添加-sudo-文件的写权限" class="headerlink" title="2. 添加 sudo 文件的写权限"></a>2. 添加 sudo 文件的写权限</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod u+w /etc/sudoers</span><br></pre></td></tr></table></figure><h3 id="3-编辑-sudoers-文件"><a href="#3-编辑-sudoers-文件" class="headerlink" title="3. 编辑 sudoers 文件"></a>3. 编辑 sudoers 文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/sudoers</span><br></pre></td></tr></table></figure><p>找到这行 <code>root ALL=(ALL) ALL</code>, 在它下面添加一行, 将 root 替换为你的用户名</p><blockquote><p>你可以 sudoers 添加下面四行中任意一条</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">youuser            ALL&#x3D;(ALL)                ALL</span><br><span class="line">%youuser           ALL&#x3D;(ALL)                ALL</span><br><span class="line">youuser            ALL&#x3D;(ALL)                NOPASSWD: ALL</span><br><span class="line">%youuser           ALL&#x3D;(ALL)                NOPASSWD: ALL</span><br></pre></td></tr></table></figure><p>第一行:允许用户 youuser 执行 sudo 命令(需要输入密码).<br>第二行:允许用户组 youuser 里面的用户执行 sudo 命令(需要输入密码).<br>第三行:允许用户 youuser 执行 sudo 命令,并且在执行的时候不输入密码.<br>第四行:允许用户组 youuser 里面的用户执行 sudo 命令,并且在执行的时候不输入密码.</p></blockquote><h3 id="4-撤销-sudo-文件的写权限"><a href="#4-撤销-sudo-文件的写权限" class="headerlink" title="4. 撤销 sudo 文件的写权限"></a>4. 撤销 sudo 文件的写权限</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod u-w /etc/sudoers</span><br></pre></td></tr></table></figure><h2 id="允许用户使用密钥登陆"><a href="#允许用户使用密钥登陆" class="headerlink" title="允许用户使用密钥登陆"></a>允许用户使用密钥登陆</h2><h3 id="新密钥对登陆"><a href="#新密钥对登陆" class="headerlink" title="新密钥对登陆"></a>新密钥对登陆</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">su username <span class="comment"># 切换到普通用户</span></span><br><span class="line"><span class="built_in">cd</span> ~ <span class="comment"># 进入 home 目录</span></span><br><span class="line">ssh-keygen -r rsa <span class="comment"># 创建密钥对, 一路回车即可</span></span><br><span class="line"><span class="built_in">cd</span> .ssh <span class="comment"># 进入 .ssh 目录</span></span><br><span class="line">mv id_rsa.pub authorized_keys <span class="comment"># 将公钥重命名</span></span><br></pre></td></tr></table></figure><p>然后将 id_rsa 下载到主机, 并且使用它登陆即可</p><h3 id="使用已有密钥对"><a href="#使用已有密钥对" class="headerlink" title="使用已有密钥对"></a>使用已有密钥对</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">su username</span><br><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line">mkdir -m 700 .ssh <span class="comment"># 创建 .ssh 目录</span></span><br><span class="line"><span class="built_in">cd</span> .ssh</span><br><span class="line"><span class="comment"># 将 id_rsa.pub 放入此目录</span></span><br><span class="line">mv id_rsa.pub authorized_keys</span><br><span class="line">chmod 644 authorized_keys</span><br></pre></td></tr></table></figure><h1 id="文件与目录"><a href="#文件与目录" class="headerlink" title="文件与目录"></a>文件与目录</h1><h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><h3 id="mkdir-创建目录"><a href="#mkdir-创建目录" class="headerlink" title="mkdir 创建目录"></a><code>mkdir</code> 创建目录</h3><ul><li><code>-m [prop]</code> 目标属性, 目录权限.</li><li><code>-p</code> 递归创建, 如果目标目录上级目录不存在, 则创建.</li></ul><h3 id="setfacl-getfacl-为文件或目录添加多个用户-组"><a href="#setfacl-getfacl-为文件或目录添加多个用户-组" class="headerlink" title="setfacl getfacl 为文件或目录添加多个用户(组)"></a><code>setfacl</code> <code>getfacl</code> 为文件或目录添加多个用户(组)</h3><ul><li><code>setfacl -m g:group:rwx path</code> 为 path 添加 group 用户组</li><li><code>setfacl -m u:user:rwx path</code> 为 path 添加 user 用户</li><li><code>setfacl -x g:group path</code> 为 path 移除 group 用户组</li><li><code>setfacl -x u:user path</code> 为 path 移除 user 用户</li><li><code>getfacl path</code> 查看 path 的所有权限</li></ul><h2 id="文件内容查阅"><a href="#文件内容查阅" class="headerlink" title="文件内容查阅"></a>文件内容查阅</h2><table><thead><tr><th>命令</th><th align="left">作用</th></tr></thead><tbody><tr><td><code>cat</code></td><td align="left">由第一行开始显示文件内容</td></tr><tr><td><code>tac</code></td><td align="left">由最后一行开始显示文件内容</td></tr><tr><td><code>nl</code></td><td align="left">输出行号显示</td></tr><tr><td><code>more</code></td><td align="left">逐页显示内容</td></tr><tr><td><code>less</code></td><td align="left">逐页显示内容还可以向上翻页</td></tr><tr><td><code>head</code></td><td align="left">输出头部若干行</td></tr><tr><td><code>tail</code></td><td align="left">输出尾部若干行</td></tr><tr><td><code>od</code></td><td align="left">以二进制输出文件内容</td></tr></tbody></table><h3 id="cat-由第一行开始显示文件内容"><a href="#cat-由第一行开始显示文件内容" class="headerlink" title="cat 由第一行开始显示文件内容"></a><code>cat</code> 由第一行开始显示文件内容</h3><ul><li><code>-n</code> 列出行号，包括空行</li></ul><h3 id="less-分页显示文件内容"><a href="#less-分页显示文件内容" class="headerlink" title="less 分页显示文件内容"></a><code>less</code> 分页显示文件内容</h3><table><thead><tr><th>按键</th><th align="left">作用</th></tr></thead><tbody><tr><td>space</td><td align="left">向下翻一页</td></tr><tr><td>pagedown</td><td align="left">向下翻一页</td></tr><tr><td>pageup</td><td align="left">向上翻一页</td></tr><tr><td>/[字符串]</td><td align="left">向下查询 [字符串]</td></tr><tr><td>?[字符串]</td><td align="left">向上查询 [字符串]</td></tr><tr><td>n</td><td align="left">向下重复一次查询</td></tr><tr><td>N</td><td align="left">向上重复一次查询</td></tr><tr><td>q</td><td align="left">离开 less</td></tr></tbody></table><h3 id="tail-显示文件尾部内容"><a href="#tail-显示文件尾部内容" class="headerlink" title="tail 显示文件尾部内容"></a><code>tail</code> 显示文件尾部内容</h3><ul><li><code>-n</code> 接数字，显示多少行</li><li><code>-f</code> 持续检测文件尾部变动，按下 ctrl-c 结束检测</li></ul><h2 id="编辑文件"><a href="#编辑文件" class="headerlink" title="编辑文件"></a>编辑文件</h2><h3 id="非交互式写入"><a href="#非交互式写入" class="headerlink" title="非交互式写入"></a>非交互式写入</h3><p>将字符串写入文件（清空原有内容）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;foo&quot;</span> &gt; file.txt</span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">cat &gt; file.txt &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">foo</span></span><br><span class="line"><span class="string">bar</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure><p>追加在文件尾部</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;foo&quot;</span> &gt;&gt; file.txt</span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">cat &gt;&gt; file.txt &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">foo</span></span><br><span class="line"><span class="string">bar</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure><h3 id="sed-非交互式编辑"><a href="#sed-非交互式编辑" class="headerlink" title="sed 非交互式编辑"></a><code>sed</code> 非交互式编辑</h3><p>处理前置命令的输出结果</p><p><code>(std-out) | sed [options]</code>command``</p><p>处理文件</p><p><code>sed [-n] [-i]</code>条件 命令<code>file</code></p><ul><li><code>-n</code> 忽略没有修改的输出</li><li><code>-i</code> 直接修改源文件</li><li><code>-r</code> 支持拓展正则表达式</li></ul><table><thead><tr><th>条件</th><th>作用</th><th>例子</th><th>解释</th></tr></thead><tbody><tr><td>行号 命令</td><td>对指定行号的行进行操作</td><td><code>3p</code></td><td>打印第 3 行</td></tr><tr><td>起始行号,终止行号 命令</td><td>对范围中的几行进行操作</td><td><code>2,6d</code></td><td>删除第 2 行到第 6 行</td></tr><tr><td>行号 1 命令 ; 行号 2 命令; ……</td><td>对多行进行操作，没有行号先后区分</td><td><code>1p;2d</code></td><td>打印第 1 行然后删除第 2 行</td></tr><tr><td>起始行号,+附加的行数 命令</td><td>从起始行号开始，再加指定行数，这写范围内的所有行进行操作</td><td><code>1,+3p</code></td><td>打印 1 到 4 行的内容</td></tr><tr><td>起始行号~步长 命令</td><td>从起始行号开始，每隔一个步长的每个行进行操作</td><td><code>1~2p</code></td><td>打印奇数行的内容</td></tr><tr><td></td><td></td><td><code>2~2p</code></td><td>打印偶数行的内容</td></tr><tr><td>/正则表达式/命令</td><td>对匹配正则表达式的行进行操作，注意格式要求</td><td><code>/^root&#124;^ftp/d<code></code></code></td><td>删除文件中包以 root 或者 ftp 开头的行</td></tr><tr><td>$命令</td><td>对最后一行进行操作</td><td><code>$!d</code></td><td>最后一行保留，其他全部干掉</td></tr></tbody></table><table><thead><tr><th>命令</th><th>作用</th><th>用法和例子</th><th>解释</th></tr></thead><tbody><tr><td>i</td><td>插入文本</td><td>条件 i 内容</td><td>在指定的行之前插入文本</td></tr><tr><td>a</td><td>追加文本</td><td>条件 a 内容</td><td>在指定的行之后追加文本</td></tr><tr><td>c</td><td>替换行</td><td>条件 c 内容</td><td>把指定行的内容替换，整行都替换掉</td></tr><tr><td>p</td><td>打印</td><td>条件 p</td><td>打印符合条件的内容，注意如果没有-n，sed 默认打印所有</td></tr><tr><td>!p</td><td>打印其他</td><td>条件!p</td><td>不打印符合条件的内容，打印其他的所有</td></tr><tr><td>=</td><td>打印行号</td><td><code>$=</code></td><td>输出文件一共多少行，<code>$</code>代表最后一行，<code>=</code>代表输出行号</td></tr><tr><td></td><td></td><td><code>/^root/=</code></td><td>输出以 root 开头的行号</td></tr><tr><td>d</td><td>删除</td><td>条件 d</td><td>删除符合条件的内容</td></tr><tr><td></td><td></td><td><code>$d</code></td><td>删除最后一行</td></tr><tr><td></td><td></td><td><code>/^$/d</code></td><td>删除所有空行 ，这是正则与之结合的结果</td></tr><tr><td>!d</td><td>保留其他</td><td>条件!d</td><td>符合条件的不删除，其余删除</td></tr><tr><td></td><td></td><td><code>/^root/!d</code></td><td>以 root 开头的保留，其余全部删除</td></tr><tr><td>s</td><td>替换</td><td>条件 s/被替换内容/替换成什么/第几个</td><td>把文件中的每个符合条件的行的第几个匹配替换要求的内容进行替换，如果没有这么多个被替换内容就不替换，不写默认第一个</td></tr><tr><td></td><td></td><td>条件 s/被替换内容/替换成什么/g</td><td>把文件中的每个符合条件的行的所有匹配替换要求的内容进行替换</td></tr><tr><td></td><td></td><td>条件 s/被替换内容/替换成什么/第几个 p</td><td>把文件中的每个符合条件的行的第几个匹配替换要求的内容进行替换，然后显示，如果前面有-n，那么就可以完成替换后只显示替换的部分信息</td></tr><tr><td></td><td></td><td>条件 s#被替换内容#替换成什么#</td><td>s 后面紧跟的符号就是控制替换符号，可以是任意字符，包括空格，字符，数字，但是不建议使用</td></tr><tr><td></td><td></td><td><code>2s/student//2p</code></td><td>把文件中第二行中第二个 student 替换成空,然后现实替换的内容，可以用作删除</td></tr><tr><td></td><td></td><td><code>1,5s/^a/#a</code></td><td>在 1 到 5 行每个以 a 开头的行的前面加上注释</td></tr><tr><td></td><td></td><td><code>6,10s/^#//</code></td><td>把 6 到 10 行中的注释的注释标示去掉，让其成为配置</td></tr><tr><td></td><td></td><td><code>99s9\98\97\99\95\98\99gp</code></td><td>这里面替换控制符号是 9，他就算把 99 行所有的 98979 替换成 95989 然后输出</td></tr><tr><td></td><td></td><td><code>1s#^.\&#123;&#39;$n&#39;\&#125;..∗..\&#123;&#39;$m&#39;\&#125;$#\1\4\3\2\5#</code></td><td>把第 n 个和倒数第 m 个字符对调</td></tr><tr><td>r</td><td>导入文件</td><td><code>条件 r 文件 2</code></td><td>把文件 2（条件指令中的文件）中的内容添加文件 1（sed 命令后操作的文件）中到满足条件的行下</td></tr><tr><td></td><td></td><td><code>sed -n &quot;2 r a.txt&quot; b.txt</code></td><td>把 a.txt 的内容添加到 b.txt 的第二行下</td></tr><tr><td>w</td><td>导出文件</td><td>条件 w 文件 2</td><td>把文件 1（sed 命令后操作的文件）中到满足条件的行另存到文件 2 中</td></tr><tr><td></td><td></td><td><code>sed -n &quot;w a.txt&quot; b.txt</code></td><td>把 b.txt 的所有内容保存到 a.txt 中</td></tr><tr><td>H</td><td>追加复制</td><td>条件 H</td><td>把符合条件的行的内容写入复制版中</td></tr><tr><td>h</td><td>覆盖复制</td><td>条件 h</td><td>把符合条件的行的内容覆盖写入复制版中</td></tr><tr><td>G</td><td>追加粘贴</td><td>条件 G</td><td>把复制版中的内容追加到符合条件的行后面，注意也没有回车</td></tr><tr><td>g</td><td>覆盖粘贴</td><td>条件 g</td><td>把复制版中的内容覆盖到符合条件的行后面，注意也没有回车</td></tr></tbody></table><p>注意</p><ul><li>在 sed 中的空格没有太过严格的要求，条件与命令间有没有空格都可以，不影响使用，</li><li>如果想让输出有该行在源文件的位置，可以用 <code>cat -n 文件 | sed [选项] 条件 命令</code><br>但是这时候如果用正则匹配，开头匹配就不能用了，因为内容有了改变，原本再文件中开头的数据前面都有了行号，他们就不是在行首了</li><li>删除某一行或多行用命令 <code>条件 d</code> ，如果删除某一行或多行中的某一些字段用 <code>条件 s/目标字段//</code><br>替换某一行的内容用<code>条件 c 内容</code> , 如果替换某一行中的某个字段用<code>条件 s/被替换的部分/替换成什么/</code></li><li>s 后面紧跟的符号就是控制替换符号，可以是任意字符，包括空格，字符，数字，但是不建议使用</li><li>在 sed 的 s 替换中替换成什么，这个部分，符号基本都没有特殊含义，除了 \ 和被选定作为控制替换符号 ， 如果要向替换成 \ 就要打 \ 如果向换成 \ 就打 \\ 依次类推 ， 如果要替换成控制替换符号如 / 就要打 /<br>例如： sed -n <code>s/[A−Z]/\/\\\1:&quot;</code>/gp` 文件 其作用就是把全文所有的大写字母 变成 /\大写字母:” 然后打印出来</li><li>一般 sed 中用 ``限定起来如果要用变量可以把中间的条件命令分开来<code>……</code>$变量<code>……</code> 这样就可以了</li></ul><h1 id="SHELL"><a href="#SHELL" class="headerlink" title="SHELL"></a>SHELL</h1><h2 id="环境变量"><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h2><table><thead><tr><th>命令</th><th align="left">作用</th></tr></thead><tbody><tr><td><code>printenv</code></td><td align="left">打印所有环境变量</td></tr></tbody></table><h2 id="输出"><a href="#输出" class="headerlink" title="输出"></a>输出</h2><table><thead><tr><th>命令</th><th align="left">作用</th></tr></thead><tbody><tr><td><code>echo</code></td><td align="left">输出</td></tr></tbody></table><h3 id="echo"><a href="#echo" class="headerlink" title="echo"></a><code>echo</code></h3><h2 id="输入"><a href="#输入" class="headerlink" title="输入"></a>输入</h2><h3 id="输入参数"><a href="#输入参数" class="headerlink" title="输入参数"></a>输入参数</h3><p>读取参数时，使用 <code>$0</code>..<code>$9</code> <code>$&#123;10&#125;</code> 等获取参数</p><p>其中 <code>$0</code> 是程序名称</p><figure class="highlight bash"><figcaption><span>add.sh</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># !/bin/bash</span></span><br><span class="line"></span><br><span class="line">name=`basename <span class="variable">$0</span>`</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;the cmd is <span class="variable">$0</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;the cmd basename is <span class="variable">$name</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;The #1 param is <span class="variable">$1</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;The #2 param is <span class="variable">$2</span>&quot;</span></span><br><span class="line"></span><br><span class="line">SUM=$[ <span class="variable">$1</span> + <span class="variable">$2</span> ]</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;The result is <span class="variable">$SUM</span>&quot;</span></span><br></pre></td></tr></table></figure><p>输出</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ chmod +x add.sh</span><br><span class="line">➜  ~ .&#x2F;add.sh 1 2</span><br><span class="line">the cmd is .&#x2F;add.sh</span><br><span class="line">the cmd basename is add.sh</span><br><span class="line">The #1 param is 1</span><br><span class="line">The #2 param is 2</span><br><span class="line">The result is 3</span><br></pre></td></tr></table></figure><h3 id="特殊变量"><a href="#特殊变量" class="headerlink" title="特殊变量"></a>特殊变量</h3><p>还有几个特殊的变量可供使用</p><ul><li><code>echo $#</code> 输出参数的个数</li><li><code>echo $*</code> 输出参数变量</li><li><code>echo $@</code> 输出参数列表（可用 for in 遍历）</li></ul><p>下面的例子来判断变量参数是否符合要求</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># !/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$#</span> -lt 2 ] <span class="comment"># $#获取输入个数，选项-lt表示less than</span></span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;please input at least 2 param&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><h3 id="shift-移动参数位置"><a href="#shift-移动参数位置" class="headerlink" title="shift 移动参数位置"></a><code>shift</code> 移动参数位置</h3><p>使用 <code>shift</code> 命令将参数队列的第一个参数移出 所有参数位置向前移动</p><figure class="highlight bash"><figcaption><span>sum.sh</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># !/bin/bash</span></span><br><span class="line"></span><br><span class="line">result=0</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> [ -n <span class="string">&quot;<span class="variable">$1</span>&quot;</span> ]               <span class="comment"># 通过循环，每次读取$1位置参数</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">  result=$[ <span class="variable">$result</span> + <span class="variable">$1</span> ]    <span class="comment"># $1位置参数与原参数和累加</span></span><br><span class="line">  <span class="built_in">shift</span>                       <span class="comment"># 把$2位置参数向前移动到$1，原$1位置参数不可用</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;sum of result is <span class="variable">$result</span>&quot;</span></span><br></pre></td></tr></table></figure><h3 id="read-读取键盘输入"><a href="#read-读取键盘输入" class="headerlink" title="read 读取键盘输入"></a><code>read</code> 读取键盘输入</h3><p><code>read [-s] [-t timeout] [-n num] [-p prompt] [variables...]</code></p><ul><li><code>-p prompt</code> 提示语句</li><li><code>-s</code> 静默输入(例如输入密码)</li><li><code>-t timeout</code> 设置输入超时时间，如果超时则以非 0 状态退出</li><li><code>-n num</code> 限制输入字数，如果设置为一则只需要按下一个字母，无需按回车键</li><li><code>variabels</code> 变量名 可以制定多个， 如果不指定会将输入将存入<code>REPLY</code>变量中</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># !/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> -n <span class="string">&quot;Enter your name:&quot;</span>                 <span class="comment"># 参数-n的作用是不换行，echo默认换行</span></span><br><span class="line"><span class="built_in">read</span> name                                  <span class="comment"># 把输入放入变量name</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;hello <span class="variable">$name</span>,welcome to my program&quot;</span>   <span class="comment"># 显示输入信息</span></span><br><span class="line"><span class="built_in">exit</span> 0</span><br></pre></td></tr></table></figure><p>交互式菜单</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Please Select:</span></span><br><span class="line"><span class="string">1.Display System Information</span></span><br><span class="line"><span class="string">2.Display Disk Space</span></span><br><span class="line"><span class="string">3.Display Home Space Utilization</span></span><br><span class="line"><span class="string">0.Quit&quot;</span></span><br><span class="line"><span class="built_in">read</span> -p -n 1 <span class="string">&quot;Enter selection [0-3] &gt;&quot;</span> num</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [[ <span class="variable">$num</span> =~ ^[0-3]$ ]]; <span class="keyword">then</span></span><br><span class="line">   <span class="keyword">if</span> [[ <span class="variable">$num</span> == 0 ]]; <span class="keyword">then</span></span><br><span class="line">     <span class="built_in">echo</span> <span class="string">&quot;Program terminated&quot;</span></span><br><span class="line">     <span class="built_in">exit</span>;</span><br><span class="line">   <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> [[ <span class="variable">$num</span> == 1 ]]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Hostname :<span class="variable">$HOSTNAME</span>&quot;</span></span><br><span class="line">    uptime</span><br><span class="line">    <span class="built_in">exit</span></span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> [[ <span class="variable">$num</span> == 2 ]]; <span class="keyword">then</span></span><br><span class="line">    df -h</span><br><span class="line">    <span class="built_in">exit</span>;</span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> [[ <span class="variable">$num</span> == 3 ]]; <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">if</span> [[ $(id -u) -eq 0 ]]; <span class="keyword">then</span></span><br><span class="line">      <span class="built_in">echo</span> <span class="string">&quot;Home Space Utilization(All Users)&quot;</span></span><br><span class="line">      du -sh /home/*</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      <span class="built_in">echo</span> <span class="string">&quot;Home Space Utilization(<span class="variable">$USER</span>)&quot;</span></span><br><span class="line">      du -sh <span class="variable">$HOME</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"> <span class="built_in">echo</span> <span class="string">&quot;Invalid entry.&quot;</span> &gt;&amp;2</span><br><span class="line"> <span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><h3 id="自动输入"><a href="#自动输入" class="headerlink" title="自动输入"></a>自动输入</h3><p>我们在写 shell 脚本时会遇到需要进行手动输入的命令，如 <code>sudo</code> <code>passwd</code> 等需要等待输入密码，在 shell 脚本中如何进行输入呢？</p><p>以 <code>passwd username</code> 为例</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">passwd username &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">123456</span></span><br><span class="line"><span class="string">123456</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure><h2 id="条件"><a href="#条件" class="headerlink" title="条件"></a>条件</h2><h3 id="并且-（AND）"><a href="#并且-（AND）" class="headerlink" title="并且 （AND）"></a>并且 （AND）</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">if [ c1 -a c2 ]; then</span><br><span class="line">...</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">if [ c1 ] &amp;&amp; [ c2 ]; then</span><br><span class="line">...</span><br><span class="line">fi</span><br></pre></td></tr></table></figure><h3 id="或-（OR）"><a href="#或-（OR）" class="headerlink" title="或 （OR）"></a>或 （OR）</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">if [ c1 -o c2 ]; then</span><br><span class="line">...</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">if [ c1 ] || [ c2 ]; then</span><br><span class="line">...</span><br><span class="line">fi</span><br></pre></td></tr></table></figure><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-text">前言</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4"><span class="nav-text">命令</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%AB%E5%90%8D"><span class="nav-text">别名</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%BF%9B%E7%A8%8B"><span class="nav-text">进程</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8C%82%E8%B5%B7%E4%B8%8E%E6%81%A2%E5%A4%8D"><span class="nav-text">挂起与恢复</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8"><span class="nav-text">开机启动</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AE%89%E5%85%A8"><span class="nav-text">安全</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E6%96%B0%E7%94%A8%E6%88%B7"><span class="nav-text">创建新用户</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#adduser-%E8%87%AA%E5%8A%A8%E5%88%9B%E5%BB%BA%E6%96%B0%E7%94%A8%E6%88%B7"><span class="nav-text">adduser 自动创建新用户</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#useradd-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%88%9B%E5%BB%BA%E6%96%B0%E7%94%A8%E6%88%B7"><span class="nav-text">useradd 自定义创建新用户</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B0%86%E7%94%A8%E6%88%B7%E6%B7%BB%E5%8A%A0%E8%BF%9B%E4%B8%80%E4%B8%AA%E7%94%A8%E6%88%B7%E7%BB%84%E4%B8%AD"><span class="nav-text">将用户添加进一个用户组中</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#usermod-%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%94%A8%E6%88%B7%E7%BB%84"><span class="nav-text">usermod 创建一个用户组</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%BA%E6%99%AE%E9%80%9A%E7%94%A8%E6%88%B7%E6%B7%BB%E5%8A%A0-root-%E6%9D%83%E9%99%90"><span class="nav-text">为普通用户添加 root 权限</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E5%88%87%E6%8D%A2%E5%88%B0-root-%E7%94%A8%E6%88%B7%E4%B8%8B"><span class="nav-text">1. 切换到 root 用户下</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E6%B7%BB%E5%8A%A0-sudo-%E6%96%87%E4%BB%B6%E7%9A%84%E5%86%99%E6%9D%83%E9%99%90"><span class="nav-text">2. 添加 sudo 文件的写权限</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E7%BC%96%E8%BE%91-sudoers-%E6%96%87%E4%BB%B6"><span class="nav-text">3. 编辑 sudoers 文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E6%92%A4%E9%94%80-sudo-%E6%96%87%E4%BB%B6%E7%9A%84%E5%86%99%E6%9D%83%E9%99%90"><span class="nav-text">4. 撤销 sudo 文件的写权限</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%81%E8%AE%B8%E7%94%A8%E6%88%B7%E4%BD%BF%E7%94%A8%E5%AF%86%E9%92%A5%E7%99%BB%E9%99%86"><span class="nav-text">允许用户使用密钥登陆</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%B0%E5%AF%86%E9%92%A5%E5%AF%B9%E7%99%BB%E9%99%86"><span class="nav-text">新密钥对登陆</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E5%B7%B2%E6%9C%89%E5%AF%86%E9%92%A5%E5%AF%B9"><span class="nav-text">使用已有密钥对</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8E%E7%9B%AE%E5%BD%95"><span class="nav-text">文件与目录</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%9B%AE%E5%BD%95"><span class="nav-text">目录</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#mkdir-%E5%88%9B%E5%BB%BA%E7%9B%AE%E5%BD%95"><span class="nav-text">mkdir 创建目录</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#setfacl-getfacl-%E4%B8%BA%E6%96%87%E4%BB%B6%E6%88%96%E7%9B%AE%E5%BD%95%E6%B7%BB%E5%8A%A0%E5%A4%9A%E4%B8%AA%E7%94%A8%E6%88%B7-%E7%BB%84"><span class="nav-text">setfacl getfacl 为文件或目录添加多个用户(组)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9%E6%9F%A5%E9%98%85"><span class="nav-text">文件内容查阅</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#cat-%E7%94%B1%E7%AC%AC%E4%B8%80%E8%A1%8C%E5%BC%80%E5%A7%8B%E6%98%BE%E7%A4%BA%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9"><span class="nav-text">cat 由第一行开始显示文件内容</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#less-%E5%88%86%E9%A1%B5%E6%98%BE%E7%A4%BA%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9"><span class="nav-text">less 分页显示文件内容</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#tail-%E6%98%BE%E7%A4%BA%E6%96%87%E4%BB%B6%E5%B0%BE%E9%83%A8%E5%86%85%E5%AE%B9"><span class="nav-text">tail 显示文件尾部内容</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BC%96%E8%BE%91%E6%96%87%E4%BB%B6"><span class="nav-text">编辑文件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9D%9E%E4%BA%A4%E4%BA%92%E5%BC%8F%E5%86%99%E5%85%A5"><span class="nav-text">非交互式写入</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#sed-%E9%9D%9E%E4%BA%A4%E4%BA%92%E5%BC%8F%E7%BC%96%E8%BE%91"><span class="nav-text">sed 非交互式编辑</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SHELL"><span class="nav-text">SHELL</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="nav-text">环境变量</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BE%93%E5%87%BA"><span class="nav-text">输出</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#echo"><span class="nav-text">echo</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BE%93%E5%85%A5"><span class="nav-text">输入</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BE%93%E5%85%A5%E5%8F%82%E6%95%B0"><span class="nav-text">输入参数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%89%B9%E6%AE%8A%E5%8F%98%E9%87%8F"><span class="nav-text">特殊变量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#shift-%E7%A7%BB%E5%8A%A8%E5%8F%82%E6%95%B0%E4%BD%8D%E7%BD%AE"><span class="nav-text">shift 移动参数位置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#read-%E8%AF%BB%E5%8F%96%E9%94%AE%E7%9B%98%E8%BE%93%E5%85%A5"><span class="nav-text">read 读取键盘输入</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E5%8A%A8%E8%BE%93%E5%85%A5"><span class="nav-text">自动输入</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9D%A1%E4%BB%B6"><span class="nav-text">条件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B9%B6%E4%B8%94-%EF%BC%88AND%EF%BC%89"><span class="nav-text">并且 （AND）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%88%96-%EF%BC%88OR%EF%BC%89"><span class="nav-text">或 （OR）</span></a></li></ol></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="mutoe" src="/images/avatar.jpg"><p class="site-author-name" itemprop="name">mutoe</p><div class="site-description" itemprop="description">木头, 全学工程师</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">39</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">5</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">42</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/mutoe" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;mutoe" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a> </span><span class="links-of-author-item"><a href="mailto:mutoe@foxmail.com" title="E-Mail → mailto:mutoe@foxmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a></span></div></div></div><div id="sidebar-dimmer"></div></article></div></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; 2015 – <span itemprop="copyrightYear">2020</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">mutoe</span></div><div class="external-link"><a href="/sponsor">拥抱开源</a> <a href="/quick">学习资料导航</a> <a href="/npm">常用 npm 包</a></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i> </span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span> </span></span><span class="post-meta-divider">|</span> <span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div></div></footer></div><script src="/lib/anime.min.js"></script><script src="//cdn.jsdelivr.net/npm/velocity-animate@1/velocity.min.js"></script><script src="//cdn.jsdelivr.net/npm/velocity-animate@1/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script><script>!function(){var o,n,e=document.getElementsByTagName("link");if(0<e.length)for(i=0;i<e.length;i++)"canonical"==e[i].rel.toLowerCase()&&e[i].href&&(o=e[i].href);n=o?o.split(":")[0]:window.location.protocol.split(":")[0],o||(o=window.location.href),function(){var e=o,i=document.referrer;if(!/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi.test(e)){var t="https"===String(n).toLowerCase()?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif";i?(t+="?r="+encodeURIComponent(document.referrer),e&&(t+="&l="+e)):e&&(t+="?l="+e),(new Image).src=t}}(window)}()</script><script src="/js/local-search.js"></script></body></html>